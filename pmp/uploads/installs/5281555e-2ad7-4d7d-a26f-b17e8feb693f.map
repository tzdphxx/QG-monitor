{"version":3,"sources":["../../node_modules/mini-sentry-sdk/dist/index.esm.js"],"names":["v","c","JS_ERROR","PROMISE_ERROR","RESOURCE_ERROR","HTTP_ERROR","REACT_ERROR","ce","ERROR","PERFORMANCE","BEHAVIOR","N","constructor","e","this","initialized","globalBreadcrumbs","errorBreadcrumbs","behaviorBreadcrumbs","BREADCRUMB_LIMITS","global","error","behavior","failureCount","Map","MAX_FAILURES","FAILURE_RESET_TIME","lastSuccessTime","disabledDataTypes","Set","pageStartTime","Date","now","totalVisibleTime","visibleStartTime","isPageVisible","document","hidden","currentRoute","location","pathname","search","hash","config","debug","sampleRate","maxBreadcrumbs","enabledModules","performance","sessionId","generateSessionId","set","init","console","warn","_a","initErrorMonitoring","_b","initPerformanceMonitoring","_c","initBehaviorMonitoring","initPageStayTimeTracking","initSPARouteMonitoring","startBatchReporting","log","userAgent","navigator","apiUrl","breadcrumbLimits","addBreadcrumb","t","r","i","o","s","category","message","level","timestamp","data","optimizeDataSize","captureType","addToGlobalBreadcrumbs","addToErrorBreadcrumbs","addToBehaviorBreadcrumbs","globalCount","length","errorCount","behaviorCount","push","slice","collectAndSendBehaviorData","projectId","url","window","href","breadcrumbs","pageInfo","title","stayTime","behaviorBreadcrumbCount","errorBreadcrumbCount","route","sendData","convertToUnifiedFormat","reportError","shouldSample","errorType","type","collectPerformanceData","metrics","navigation","getNavigationTiming","vitals","getWebVitals","shouldSendDataType","buildApiUrl","JSON","stringify","visibilityState","sendWithBeacon","sendWithFetch","reportTimer","setInterval","isAllDataTypesDisabled","clearInterval","resetFailureCountIfNeeded","addEventListener","handlePageUnload","recordCurrentPageStayTime","captureError","parseErrorStack","stack","tags","mergeTags","filename","jsFilename","lineno","colno","trackEvent","trackMetric","metricName","metricValue","trackBusiness","eventType","eventName","split","match","l","T","parseInt","cleanTags","Object","entries","String","defaultTags","includes","request","response","duration","resourceType","resourceUrl","elementInfo","has","get","add","Math","random","toString","substr","endsWith","AbortController","setTimeout","abort","fetch","method","headers","body","keepalive","signal","clearTimeout","ok","Error","status","statusText","delete","handleSendFailure","sendBeacon","Blob","every","max","totalTime","visibleTime","resetPageStayTime","history","pushState","bind","replaceState","handleRouteChange","newURL","from","to","target","reason","Element","src","tagName","toLowerCase","id","detectWhiteScreen","initLongTaskMonitoring","interceptFetch","interceptXHR","XMLHttpRequest","prototype","open","send","_monitorData","startTime","call","monitor","hasVisibleContent","innerText","trim","querySelectorAll","width","height","getBoundingClientRect","PerformanceObserver","getEntries","forEach","round","taskType","severity","observe","entryTypes","async","readyState","observeWebVitals","name","latestFcpValue","latestLcpValue","metric","value","source","disconnect","lcpObserver","element","size","setupLcpFinalization","lcpFinalValue","getEntriesByType","domReady","domContentLoadedEventEnd","fetchStart","loadComplete","loadEventEnd","timing","navigationStart","getFcpValue","fcp","getLcpValue","lcp","find","abs","referrer","action","key","ctrlKey","toUpperCase","pageYOffset","documentElement","scrollTop","scrollHeight","innerHeight","scrollPercent","getBreadcrumbStatus","count","limit","latest","map","clearBreadcrumbs","getSendStatus","fromEntries","Array","maxFailures","getStatus","breadcrumbStatus","pageStayTime","total","visible","sendStatus","resetSendStatus","clear","getVitalsStatus","observed","final","available","observerActive","possibleIncorrectAssignment","performanceAPI","paintEntries","lcpEntries","destroy","_","timeout","retries","upload","makeRequest","files","pow","sleep","apiKey","u","b","calculateFileHash","content","FormData","append","version","generateBuildVersion","p","Authorization","S","text","json","validateSourceMap","parse","isArray","sources","mappings","compressSourceMap","names","sourcesContent","getJsFilename","replace","TextEncoder","encode","crypto","subtle","digest","Uint8Array","padStart","join","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","Promise","x","makeNodeRequest","require","URL","protocol","g","createHash","update","w","P","f","Buffer","contentType","D","hostname","port","path","getHeaders","R","C","on","M","statusCode","pipe","G","Q","k","exports","A","F","Symbol","for","ref","$$typeof","props","Fragment","jsx","jsxs","le","he","ae","super","state","hasError","getDerivedStateFromError","componentDidCatch","onError","render","fallback","style","padding","textAlign","color","children","onClick","reload","backgroundColor","border","borderRadius","cursor","Z","Monitor","ErrorBoundary","SourceMapUploader","NodeSourceMapUploader","createMonitor","createUploader","VERSION","fe","ge","pe","be","MiniSentrySDK"],"mappings":"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","sourcesContent":["import se, { Component as ae } from \"react\";\nvar v = /* @__PURE__ */ ((c) => (c.JS_ERROR = \"js_error\", c.PROMISE_ERROR = \"promise_error\", c.RESOURCE_ERROR = \"resource_error\", c.HTTP_ERROR = \"http_error\", c.REACT_ERROR = \"react_error\", c))(v || {}), ce = /* @__PURE__ */ ((c) => (c.ERROR = \"error\", c.PERFORMANCE = \"performance\", c.BEHAVIOR = \"behavior\", c))(ce || {});\nclass N {\n  constructor(e) {\n    this.initialized = !1, this.globalBreadcrumbs = [], this.errorBreadcrumbs = [], this.behaviorBreadcrumbs = [], this.BREADCRUMB_LIMITS = {\n      global: 100,\n      // 全局最多保留100条\n      error: 15,\n      // 错误专用最多15条\n      behavior: 50\n      // 行为专用最多50条（定期清空）\n    }, this.failureCount = /* @__PURE__ */ new Map(), this.MAX_FAILURES = 5, this.FAILURE_RESET_TIME = 3e5, this.lastSuccessTime = /* @__PURE__ */ new Map(), this.disabledDataTypes = /* @__PURE__ */ new Set(), this.pageStartTime = Date.now(), this.totalVisibleTime = 0, this.visibleStartTime = Date.now(), this.isPageVisible = !document.hidden, this.currentRoute = location.pathname + location.search + location.hash, this.config = {\n      debug: !1,\n      sampleRate: 1,\n      maxBreadcrumbs: 10,\n      enabledModules: {\n        error: !0,\n        performance: !0,\n        behavior: !0\n      },\n      ...e\n    }, this.sessionId = this.generateSessionId(), this.failureCount.set(\"error\", 0), this.failureCount.set(\"performance\", 0), this.failureCount.set(\"behavior\", 0), this.config.maxBreadcrumbs && (this.BREADCRUMB_LIMITS.error = this.config.maxBreadcrumbs);\n  }\n  async init() {\n    if (this.initialized) {\n      console.warn(\"Monitor has already been initialized\");\n      return;\n    }\n    try {\n      this.config.enabledModules?.error && this.initErrorMonitoring(), this.config.enabledModules?.performance && this.initPerformanceMonitoring(), this.config.enabledModules?.behavior && this.initBehaviorMonitoring(), this.initPageStayTimeTracking(), this.initSPARouteMonitoring(), this.startBatchReporting(), this.initialized = !0, this.config.debug && console.log(\"[MiniSentry] Monitor initialized successfully\", {\n        userAgent: navigator.userAgent,\n        apiUrl: this.config.apiUrl,\n        breadcrumbLimits: this.BREADCRUMB_LIMITS\n      });\n    } catch (e) {\n      throw console.error(\"[MiniSentry] Failed to initialize monitor:\", e), e;\n    }\n  }\n  //保留：面包屑分类管理\n  addBreadcrumb(e, t, r = \"info\", i, o = \"manual\") {\n    const s = {\n      category: e,\n      message: t,\n      level: r,\n      timestamp: Date.now(),\n      data: i ? this.optimizeDataSize(i) : void 0,\n      captureType: o\n    };\n    this.addToGlobalBreadcrumbs(s), this.addToErrorBreadcrumbs(s), this.addToBehaviorBreadcrumbs(s), this.config.debug && console.log(\"[MiniSentry]  面包屑已添加:\", {\n      category: e,\n      message: t,\n      globalCount: this.globalBreadcrumbs.length,\n      errorCount: this.errorBreadcrumbs.length,\n      behaviorCount: this.behaviorBreadcrumbs.length\n    });\n  }\n  addToGlobalBreadcrumbs(e) {\n    this.globalBreadcrumbs.push(e), this.globalBreadcrumbs.length > this.BREADCRUMB_LIMITS.global && (this.globalBreadcrumbs = this.globalBreadcrumbs.slice(-this.BREADCRUMB_LIMITS.global));\n  }\n  addToErrorBreadcrumbs(e) {\n    this.errorBreadcrumbs.push(e), this.errorBreadcrumbs.length > this.BREADCRUMB_LIMITS.error && (this.errorBreadcrumbs = this.errorBreadcrumbs.slice(-this.BREADCRUMB_LIMITS.error));\n  }\n  addToBehaviorBreadcrumbs(e) {\n    this.behaviorBreadcrumbs.push(e), this.behaviorBreadcrumbs.length > this.BREADCRUMB_LIMITS.behavior && (this.behaviorBreadcrumbs = this.behaviorBreadcrumbs.slice(-this.BREADCRUMB_LIMITS.behavior));\n  }\n  // 简化：行为数据收集，直接发送\n  collectAndSendBehaviorData() {\n    if (this.behaviorBreadcrumbs.length === 0)\n      return;\n    const e = Date.now();\n    this.isPageVisible && (this.totalVisibleTime += e - this.visibleStartTime, this.visibleStartTime = e);\n    const t = {\n      projectId: this.config.projectId,\n      sessionId: this.sessionId,\n      url: window.location.href,\n      timestamp: e,\n      breadcrumbs: [...this.behaviorBreadcrumbs],\n      pageInfo: {\n        title: document.title,\n        stayTime: this.totalVisibleTime\n      },\n      userAgent: navigator.userAgent\n    };\n    this.config.debug && console.log(\"[MiniSentry] 行为数据收集:\", {\n      behaviorBreadcrumbCount: this.behaviorBreadcrumbs.length,\n      errorBreadcrumbCount: this.errorBreadcrumbs.length,\n      stayTime: this.totalVisibleTime,\n      route: this.currentRoute\n    }), this.sendData(\"behavior\", this.convertToUnifiedFormat(t)), this.behaviorBreadcrumbs = [], this.config.debug && console.log(\"[MiniSentry]  行为面包屑已清空，错误面包屑保留:\", {\n      behaviorBreadcrumbCount: this.behaviorBreadcrumbs.length,\n      errorBreadcrumbCount: this.errorBreadcrumbs.length\n    });\n  }\n  //  简化：错误上报，直接发送\n  reportError(e) {\n    if (!this.shouldSample()) return;\n    const t = {\n      ...e,\n      breadcrumbs: [...this.errorBreadcrumbs]\n    };\n    this.config.debug && console.log(\"[MiniSentry]  错误上报:\", {\n      errorType: e.type,\n      message: e.message,\n      errorBreadcrumbCount: this.errorBreadcrumbs.length,\n      behaviorBreadcrumbCount: this.behaviorBreadcrumbs.length\n    }), this.sendData(\"error\", this.convertToUnifiedFormat(t));\n  }\n  //  简化：性能数据收集，直接发送\n  collectPerformanceData() {\n    const e = {\n      projectId: this.config.projectId,\n      url: window.location.href,\n      timestamp: Date.now(),\n      metrics: {\n        navigation: this.getNavigationTiming(),\n        vitals: this.getWebVitals()\n      },\n      userAgent: navigator.userAgent\n    };\n    this.config.debug && console.log(\"[MiniSentry]  性能数据收集:\", {\n      navigation: e.metrics.navigation,\n      vitals: e.metrics.vitals\n    }), this.sendData(\"performance\", this.convertToUnifiedFormat(e));\n  }\n  // 新增：统一的数据发送方法\n  sendData(e, t) {\n    if (!this.shouldSendDataType(e)) {\n      this.config.debug && console.warn(`[MiniSentry] ${e} 数据类型已被禁用，跳过发送`);\n      return;\n    }\n    if (!this.config.apiUrl) {\n      this.config.debug && console.warn(\"[MiniSentry] API URL 未配置，跳过发送\");\n      return;\n    }\n    const r = [t.data], i = this.buildApiUrl(e), o = JSON.stringify(r);\n    this.config.debug && console.log(`[MiniSentry] 📤 发送${e}数据到: ${i}`), document.visibilityState === \"hidden\" || document.hidden ? (this.config.debug && console.log(\"[MiniSentry] 🚪 页面卸载场景，使用sendBeacon\"), this.sendWithBeacon(i, o, e)) : this.sendWithFetch(i, o, e);\n  }\n  //  简化：定时上报机制\n  startBatchReporting() {\n    this.reportTimer = window.setInterval(() => {\n      if (this.isAllDataTypesDisabled()) {\n        this.config.debug && console.log(\"[MiniSentry] 所有数据类型都已被禁用，停止定时器\"), this.reportTimer && (clearInterval(this.reportTimer), this.reportTimer = void 0);\n        return;\n      }\n      this.resetFailureCountIfNeeded(), this.collectAndSendBehaviorData();\n    }, 1e4), window.addEventListener(\"beforeunload\", () => {\n      this.handlePageUnload();\n    }), document.addEventListener(\"visibilitychange\", () => {\n      document.hidden && this.collectAndSendBehaviorData();\n    });\n  }\n  handlePageUnload() {\n    this.recordCurrentPageStayTime(this.currentRoute), this.collectAndSendBehaviorData();\n  }\n  // 保留：手动上报方法\n  captureError(e, t) {\n    if (!this.initialized) {\n      console.warn(\"[MiniSentry] Monitor not initialized\");\n      return;\n    }\n    const r = this.parseErrorStack(e), i = {\n      type: v.JS_ERROR,\n      message: e.message,\n      stack: e.stack,\n      timestamp: Date.now(),\n      url: window.location.href,\n      projectId: this.config.projectId,\n      userAgent: navigator.userAgent,\n      breadcrumbs: [...this.errorBreadcrumbs],\n      captureType: \"manual\",\n      tags: this.mergeTags(t),\n      filename: r.filename,\n      jsFilename: r.jsFilename,\n      lineno: r.lineno,\n      colno: r.colno\n    };\n    this.reportError(i);\n  }\n  trackEvent(e, t, r) {\n    if (!this.initialized) {\n      console.warn(\"[MiniSentry] Monitor not initialized\");\n      return;\n    }\n    this.addBreadcrumb(e, t, \"info\", r, \"manual\");\n  }\n  trackMetric(e, t, r) {\n    if (!this.initialized) {\n      console.warn(\"[MiniSentry] Monitor not initialized\");\n      return;\n    }\n    this.addBreadcrumb(\"performance\", `Custom metric: ${e} = ${t}`, \"info\", {\n      metricName: e,\n      metricValue: t,\n      ...r\n    }, \"manual\");\n  }\n  trackBusiness(e, t) {\n    if (!this.initialized) {\n      console.warn(\"[MiniSentry] Monitor not initialized\");\n      return;\n    }\n    this.addBreadcrumb(\"user\", `Business event: ${e}`, \"info\", {\n      eventType: \"business\",\n      eventName: e,\n      ...t\n    }, \"manual\");\n  }\n  // 保留：工具方法\n  parseErrorStack(e) {\n    if (!e.stack)\n      return { stack: void 0 };\n    try {\n      const t = e.stack.split(`\n`);\n      for (const r of t) {\n        const i = r.match(/(https?:\\/\\/[^)\\s]+\\/[^)\\s]*\\.([a-zA-Z0-9]+\\.)?js):(\\d+):(\\d+)/);\n        if (i) {\n          const [, o, , s, l] = i, T = o.split(\"/\"), p = T[T.length - 1];\n          return {\n            filename: o,\n            jsFilename: p,\n            lineno: parseInt(s),\n            colno: parseInt(l),\n            stack: e.stack\n          };\n        }\n      }\n    } catch (t) {\n      this.config.debug && console.warn(\"[MiniSentry] Failed to parse error stack:\", t);\n    }\n    return { stack: e.stack };\n  }\n  cleanTags(e) {\n    if (!e) return;\n    const t = {};\n    let r = 0;\n    for (const [i, o] of Object.entries(e))\n      if (!(r >= 20 || i.length > 50) && o != null) {\n        const s = typeof o == \"object\" ? JSON.stringify(o) : String(o);\n        t[i] = s.length > 500 ? s.slice(0, 500) + \"...\" : o, r++;\n      }\n    return r > 0 ? t : void 0;\n  }\n  mergeTags(e) {\n    const t = this.config.defaultTags;\n    if (!t && !e) return;\n    const r = {\n      ...t || {},\n      ...e || {}\n    };\n    return this.cleanTags(r);\n  }\n  optimizeDataSize(e) {\n    const t = {}, r = [\n      \"from\",\n      \"to\",\n      \"url\",\n      \"method\",\n      \"status\",\n      \"duration\",\n      \"tagName\",\n      \"id\",\n      \"metricName\",\n      \"metricValue\",\n      \"scrollPercent\",\n      \"route\",\n      \"title\",\n      \"referrer\",\n      \"filename\",\n      \"jsFilename\",\n      \"lineno\",\n      \"colno\"\n    ];\n    for (const [i, o] of Object.entries(e)) {\n      const s = r.includes(i) ? 200 : 100;\n      typeof o == \"string\" && o.length > s ? t[i] = o.slice(0, s) + \"...\" : t[i] = o;\n    }\n    return t;\n  }\n  convertToUnifiedFormat(e) {\n    const t = {\n      projectId: e.projectId,\n      timestamp: e.timestamp,\n      sessionId: this.sessionId,\n      url: e.url,\n      userAgent: e.userAgent\n    };\n    if (\"type\" in e && \"message\" in e && \"breadcrumbs\" in e) {\n      const i = e, o = {\n        ...t,\n        captureType: i.captureType,\n        errorType: i.type,\n        message: i.message,\n        stack: i.stack,\n        breadcrumbs: i.breadcrumbs,\n        tags: i.tags,\n        filename: i.filename,\n        jsFilename: i.jsFilename,\n        lineno: i.lineno,\n        colno: i.colno\n      };\n      if (i.type === v.HTTP_ERROR) {\n        const s = i;\n        o.request = s.request, o.response = s.response, o.duration = s.duration;\n      }\n      if (i.type === v.RESOURCE_ERROR) {\n        const s = i;\n        o.resourceType = s.resourceType, o.resourceUrl = s.resourceUrl, o.elementInfo = s.elementInfo;\n      }\n      return { type: \"error\", data: o };\n    }\n    if (\"metrics\" in e)\n      return {\n        type: \"performance\",\n        data: {\n          ...t,\n          captureType: \"auto\",\n          metrics: e.metrics\n        }\n      };\n    if (\"pageInfo\" in e && \"sessionId\" in e) {\n      const i = e;\n      return {\n        type: \"behavior\",\n        data: {\n          ...t,\n          captureType: \"auto\",\n          breadcrumbs: i.breadcrumbs,\n          pageInfo: i.pageInfo\n        }\n      };\n    }\n    const r = e;\n    return {\n      type: \"error\",\n      data: {\n        projectId: r.projectId,\n        timestamp: r.timestamp,\n        sessionId: this.sessionId,\n        url: r.url,\n        userAgent: r.userAgent,\n        captureType: \"auto\"\n      }\n    };\n  }\n  shouldSendDataType(e) {\n    if (this.disabledDataTypes.has(e))\n      return !1;\n    const t = this.failureCount.get(e) || 0;\n    return t >= this.MAX_FAILURES ? (this.disabledDataTypes.add(e), this.config.debug && console.warn(`[MiniSentry] ${e} 数据类型失败次数过多(${t})，立即禁用`), !1) : !0;\n  }\n  shouldSample() {\n    return Math.random() < (this.config.sampleRate || 1);\n  }\n  generateSessionId() {\n    return Date.now().toString(36) + Math.random().toString(36).substr(2);\n  }\n  buildApiUrl(e) {\n    let t = this.config.apiUrl;\n    return t.endsWith(\"/\") || (t += \"/\"), `${t}${e}`;\n  }\n  async sendWithFetch(e, t, r) {\n    try {\n      const i = new AbortController(), o = setTimeout(() => i.abort(), 1e4), s = await fetch(e, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: t,\n        keepalive: !0,\n        signal: i.signal\n      });\n      if (clearTimeout(o), !s.ok)\n        throw new Error(`HTTP ${s.status}: ${s.statusText}`);\n      this.failureCount.set(r, 0), this.lastSuccessTime.set(r, Date.now()), this.disabledDataTypes.delete(r), this.config.debug && console.log(`[MiniSentry]  ${r} 数据发送成功`);\n    } catch (i) {\n      this.handleSendFailure(r, i, e, t, !1);\n    }\n  }\n  handleSendFailure(e, t, r, i, o = !1) {\n    const s = this.failureCount.get(e) || 0;\n    if (o) {\n      this.config.debug && console.warn(`[MiniSentry]  sendBeacon ${e} 发送失败，但不计入失败次数: ${t.message}`);\n      return;\n    }\n    const l = s + 1;\n    if (this.failureCount.set(e, l), this.config.debug && console.warn(`[MiniSentry]  ${e} 数据发送失败 (${l}/${this.MAX_FAILURES}): ${t.message}`), l >= this.MAX_FAILURES) {\n      this.disabledDataTypes.add(e), console.error(`[MiniSentry] ${e} 数据发送已停止（连续失败${l}次）`);\n      return;\n    }\n    this.config.debug && console.log(`[MiniSentry]  尝试使用sendBeacon降级发送 ${e} 数据`), this.sendWithBeacon(r, i, e);\n  }\n  sendWithBeacon(e, t, r) {\n    if (!navigator.sendBeacon) {\n      this.config.debug && console.warn(`[MiniSentry] sendBeacon 不支持，跳过 ${r} 数据发送`);\n      return;\n    }\n    try {\n      const i = new Blob([t], { type: \"application/json\" });\n      navigator.sendBeacon(e, i) ? this.config.debug && console.log(`[MiniSentry]  sendBeacon ${r} 已加入发送队列`) : navigator.sendBeacon(e, t) ? this.config.debug && console.log(`[MiniSentry]  sendBeacon(String) ${r} 已加入发送队列`) : this.handleSendFailure(r, new Error(\"sendBeacon 队列已满或被拒绝\"), e, t, !0);\n    } catch (i) {\n      this.handleSendFailure(r, i, e, t, !0);\n    }\n  }\n  isAllDataTypesDisabled() {\n    return [\"error\", \"performance\", \"behavior\"].every((t) => this.disabledDataTypes.has(t));\n  }\n  resetFailureCountIfNeeded() {\n    const e = Date.now();\n    for (const [t, r] of this.lastSuccessTime.entries())\n      if (e - r > this.FAILURE_RESET_TIME) {\n        const i = this.failureCount.get(t) || 0;\n        i > 0 && (this.failureCount.set(t, Math.max(0, i - 1)), this.disabledDataTypes.delete(t), this.config.debug && console.log(`[MiniSentry] ${t} 失败计数已重置，重新启用发送`));\n      }\n  }\n  recordCurrentPageStayTime(e) {\n    const t = Date.now();\n    this.isPageVisible && (this.totalVisibleTime += t - this.visibleStartTime);\n    const r = {\n      route: e,\n      totalTime: t - this.pageStartTime,\n      visibleTime: this.totalVisibleTime,\n      title: document.title\n    };\n    this.addBreadcrumb(\"user\", \"Page stay time recorded\", \"info\", r, \"auto\"), this.config.debug && console.log(\"[MiniSentry] Page stay time recorded:\", r);\n  }\n  resetPageStayTime() {\n    const e = Date.now();\n    this.pageStartTime = e, this.totalVisibleTime = 0, this.visibleStartTime = e, this.isPageVisible = !document.hidden;\n  }\n  initPageStayTimeTracking() {\n    document.addEventListener(\"visibilitychange\", () => {\n      const e = Date.now();\n      document.hidden ? this.isPageVisible && (this.totalVisibleTime += e - this.visibleStartTime, this.isPageVisible = !1, this.addBreadcrumb(\"user\", \"Page became hidden\", \"info\", {\n        visibleTime: e - this.visibleStartTime,\n        totalVisibleTime: this.totalVisibleTime\n      }, \"auto\")) : this.isPageVisible || (this.visibleStartTime = e, this.isPageVisible = !0, this.addBreadcrumb(\"user\", \"Page became visible\", \"info\", void 0, \"auto\"));\n    }), window.addEventListener(\"focus\", () => {\n      this.isPageVisible || (this.visibleStartTime = Date.now(), this.isPageVisible = !0, this.addBreadcrumb(\"user\", \"Page gained focus\", \"info\", void 0, \"auto\"));\n    }), window.addEventListener(\"blur\", () => {\n      this.isPageVisible && (this.totalVisibleTime += Date.now() - this.visibleStartTime, this.isPageVisible = !1, this.addBreadcrumb(\"user\", \"Page lost focus\", \"info\", void 0, \"auto\"));\n    });\n  }\n  initSPARouteMonitoring() {\n    this.addBreadcrumb(\"navigation\", `Initial route: ${this.currentRoute}`, \"info\", {\n      route: this.currentRoute,\n      title: document.title\n    }, \"auto\");\n    const e = history.pushState.bind(history), t = history.replaceState.bind(history);\n    history.pushState = (r, i, o) => {\n      const s = e(r, i, o);\n      return this.handleRouteChange(\"push\", o?.toString() || location.href), s;\n    }, history.replaceState = (r, i, o) => {\n      const s = t(r, i, o);\n      return this.handleRouteChange(\"replace\", o?.toString() || location.href), s;\n    }, window.addEventListener(\"popstate\", () => {\n      this.handleRouteChange(\"pop\", location.href);\n    }), window.addEventListener(\"hashchange\", (r) => {\n      this.handleRouteChange(\"hash\", r.newURL);\n    });\n  }\n  handleRouteChange(e, t) {\n    const r = location.pathname + location.search + location.hash, i = this.currentRoute;\n    r !== i && (this.recordCurrentPageStayTime(i), this.collectAndSendBehaviorData(), this.currentRoute = r, this.resetPageStayTime(), this.addBreadcrumb(\"navigation\", `Route ${e}: ${i} → ${r}`, \"info\", {\n      type: e,\n      from: i,\n      to: r,\n      title: document.title\n    }, \"auto\"), this.config.debug && console.log(`[MiniSentry] Route changed (${e}):`, { from: i, to: r }));\n  }\n  initErrorMonitoring() {\n    window.addEventListener(\"error\", (e) => {\n      if (e.target === window) {\n        const t = this.parseErrorStack(e.error || new Error(e.message)), r = {\n          type: v.JS_ERROR,\n          message: e.message,\n          stack: e.error?.stack,\n          timestamp: Date.now(),\n          url: window.location.href,\n          projectId: this.config.projectId,\n          userAgent: navigator.userAgent,\n          breadcrumbs: [...this.errorBreadcrumbs],\n          captureType: \"auto\",\n          tags: this.mergeTags(),\n          filename: e.filename || t.filename,\n          jsFilename: t.jsFilename,\n          lineno: e.lineno || t.lineno,\n          colno: e.colno || t.colno\n        };\n        this.reportError(r);\n      }\n    }), window.addEventListener(\"unhandledrejection\", (e) => {\n      const t = e.reason, r = this.parseErrorStack(t instanceof Error ? t : new Error(String(t))), i = {\n        type: v.PROMISE_ERROR,\n        message: t?.message || String(t),\n        stack: t?.stack,\n        timestamp: Date.now(),\n        url: window.location.href,\n        projectId: this.config.projectId,\n        userAgent: navigator.userAgent,\n        breadcrumbs: [...this.errorBreadcrumbs],\n        captureType: \"auto\",\n        tags: this.mergeTags(),\n        filename: r.filename,\n        jsFilename: r.jsFilename,\n        lineno: r.lineno,\n        colno: r.colno\n      };\n      this.reportError(i);\n    }), window.addEventListener(\"error\", (e) => {\n      const t = e.target;\n      if (t && t !== window && t instanceof Element) {\n        const r = t, i = {\n          type: v.RESOURCE_ERROR,\n          message: `Failed to load resource: ${r.src || r.href || \"unknown\"}`,\n          resourceType: r.tagName.toLowerCase(),\n          resourceUrl: r.src || r.href || \"\",\n          timestamp: Date.now(),\n          url: window.location.href,\n          projectId: this.config.projectId,\n          userAgent: navigator.userAgent,\n          breadcrumbs: [...this.errorBreadcrumbs],\n          elementInfo: {\n            tagName: r.tagName,\n            id: r.id || void 0\n          },\n          captureType: \"auto\",\n          tags: this.mergeTags()\n        };\n        this.reportError(i);\n      }\n    }, !0), this.detectWhiteScreen(), this.initLongTaskMonitoring(), this.interceptFetch(), this.interceptXHR();\n  }\n  interceptXHR() {\n    const e = XMLHttpRequest.prototype.open, t = XMLHttpRequest.prototype.send;\n    XMLHttpRequest.prototype.open = function(r, i, o, s, l) {\n      return this._monitorData = {\n        method: r,\n        url: i.toString(),\n        startTime: Date.now()\n      }, e.call(this, r, i, o === void 0 ? !0 : o, s, l);\n    }, XMLHttpRequest.prototype.send = function(r) {\n      const i = this._monitorData;\n      if (!i) return t.call(this, r);\n      const o = window.monitor;\n      return o && o.addBreadcrumb(\"http\", `XHR ${i.method} ${i.url}`, \"info\", {\n        url: i.url,\n        method: i.method\n      }, \"auto\"), this.addEventListener(\"loadend\", () => {\n        if (!o) return;\n        const s = Date.now() - i.startTime;\n        if (this.status >= 400) {\n          const l = {\n            type: v.HTTP_ERROR,\n            message: `XHR ${this.status}`,\n            timestamp: Date.now(),\n            url: window.location.href,\n            projectId: o.config.projectId,\n            userAgent: navigator.userAgent,\n            breadcrumbs: [...o.errorBreadcrumbs],\n            request: {\n              url: i.url,\n              method: i.method\n            },\n            response: {\n              status: this.status\n            },\n            duration: s,\n            captureType: \"auto\",\n            tags: o.mergeTags()\n          };\n          o.reportError(l);\n        }\n      }), t.call(this, r);\n    };\n  }\n  detectWhiteScreen() {\n    setTimeout(() => {\n      if (!this.hasVisibleContent()) {\n        const t = {\n          type: v.JS_ERROR,\n          message: \"White screen detected - No visible content found\",\n          timestamp: Date.now(),\n          url: window.location.href,\n          projectId: this.config.projectId,\n          userAgent: navigator.userAgent,\n          breadcrumbs: [...this.errorBreadcrumbs],\n          captureType: \"auto\",\n          tags: this.mergeTags()\n        };\n        this.reportError(t);\n      }\n    }, 3e3);\n  }\n  hasVisibleContent() {\n    const e = document.body;\n    if (!e) return !1;\n    const t = e.innerText?.trim();\n    if (t && t.length > 0) return !0;\n    const r = e.querySelectorAll(\"img\");\n    for (const s of r)\n      if (s.width > 0 && s.height > 0) return !0;\n    const i = e.querySelectorAll(\"canvas\");\n    for (const s of i)\n      if (s.width > 0 && s.height > 0) return !0;\n    const o = e.querySelectorAll(\"svg\");\n    for (const s of o)\n      if (s.getBoundingClientRect().width > 0) return !0;\n    return !1;\n  }\n  initLongTaskMonitoring() {\n    if (\"PerformanceObserver\" in window)\n      try {\n        new PerformanceObserver((t) => {\n          t.getEntries().forEach((r) => {\n            r.duration > 50 && (this.addBreadcrumb(\n              \"performance\",\n              `Long task detected: ${Math.round(r.duration)}ms`,\n              \"warning\",\n              {\n                duration: Math.round(r.duration),\n                taskType: \"longtask\",\n                startTime: Math.round(r.startTime)\n              },\n              \"auto\"\n            ), r.duration > 200 && this.addBreadcrumb(\n              \"performance\",\n              `Severe blocking task: ${Math.round(r.duration)}ms`,\n              \"error\",\n              {\n                duration: Math.round(r.duration),\n                severity: \"high\"\n              },\n              \"auto\"\n            ));\n          });\n        }).observe({ entryTypes: [\"longtask\"] });\n      } catch (e) {\n        this.config.debug && console.warn(\"[MiniSentry] Long task monitoring not supported:\", e);\n      }\n  }\n  interceptFetch() {\n    const e = window.fetch;\n    window.fetch = async (...t) => {\n      const r = Date.now(), [i, o = {}] = t;\n      this.addBreadcrumb(\"http\", `HTTP ${o.method || \"GET\"} ${i}`, \"info\", {\n        url: i.toString(),\n        method: o.method || \"GET\"\n      }, \"auto\");\n      try {\n        const s = await e(...t);\n        if (!s.ok) {\n          const l = {\n            type: v.HTTP_ERROR,\n            message: `HTTP ${s.status}`,\n            timestamp: Date.now(),\n            url: window.location.href,\n            projectId: this.config.projectId,\n            userAgent: navigator.userAgent,\n            breadcrumbs: [...this.errorBreadcrumbs],\n            request: {\n              url: i.toString(),\n              method: o.method || \"GET\"\n            },\n            response: {\n              status: s.status\n            },\n            duration: Date.now() - r,\n            captureType: \"auto\",\n            tags: this.mergeTags()\n          };\n          this.reportError(l);\n        }\n        return s;\n      } catch (s) {\n        const l = {\n          type: v.HTTP_ERROR,\n          message: `Network error: ${s.message}`,\n          stack: s.stack,\n          timestamp: Date.now(),\n          url: window.location.href,\n          projectId: this.config.projectId,\n          userAgent: navigator.userAgent,\n          breadcrumbs: [...this.errorBreadcrumbs],\n          request: {\n            url: i.toString(),\n            method: o.method || \"GET\"\n          },\n          duration: Date.now() - r,\n          captureType: \"auto\",\n          tags: this.mergeTags()\n        };\n        throw this.reportError(l), s;\n      }\n    };\n  }\n  // 修复：性能监控初始化 - 调整时机\n  initPerformanceMonitoring() {\n    document.readyState === \"loading\" ? window.addEventListener(\"load\", () => {\n      setTimeout(() => this.collectPerformanceData(), 8e3);\n    }) : setTimeout(() => this.collectPerformanceData(), 8e3), this.observeWebVitals();\n  }\n  // 修复：完善的Web Vitals观察器 - 确保FCP和LCP完全独立\n  // 1. 完全重写observeWebVitals方法 - 增加严格的独立性检查\n  observeWebVitals() {\n    if (\"PerformanceObserver\" in window) {\n      try {\n        const e = new PerformanceObserver((t) => {\n          const r = t.getEntries();\n          for (const i of r)\n            if (i.name === \"first-contentful-paint\" && this.latestFcpValue === void 0) {\n              this.latestFcpValue = i.startTime, this.config.debug && console.log(`[MiniSentry] ✅ FCP观察器独立记录: ${Math.round(i.startTime)}ms (LCP保持: ${this.latestLcpValue})`), this.addBreadcrumb(\"performance\", `FCP: ${Math.round(i.startTime)}ms`, \"info\", {\n                metric: \"fcp\",\n                value: Math.round(i.startTime),\n                source: \"observer\"\n              }, \"auto\"), e.disconnect();\n              break;\n            }\n        });\n        e.observe({ entryTypes: [\"paint\"] }), this.config.debug && console.log(\"[MiniSentry] 🔍 FCP观察器已启动（独立模式）\");\n      } catch (e) {\n        this.config.debug && console.warn(\"[MiniSentry] ❌ FCP观察器初始化失败:\", e);\n      }\n      try {\n        this.lcpObserver = new PerformanceObserver((e) => {\n          const t = e.getEntries();\n          if (t.length > 0) {\n            const r = t[t.length - 1], i = this.latestLcpValue;\n            this.latestLcpValue = r.startTime, this.config.debug && console.log(`[MiniSentry] 🔄 LCP观察器独立更新: ${Math.round(r.startTime)}ms (FCP保持: ${this.latestFcpValue}) 元素:${r.element?.tagName}`), this.addBreadcrumb(\"performance\", `LCP: ${Math.round(r.startTime)}ms`, \"info\", {\n              metric: \"lcp\",\n              value: Math.round(r.startTime),\n              element: r.element?.tagName,\n              size: r.size,\n              source: \"observer\"\n            }, \"auto\");\n          }\n        }), this.lcpObserver.observe({ entryTypes: [\"largest-contentful-paint\"] }), this.config.debug && console.log(\"[MiniSentry] 🔍 LCP观察器已启动（独立模式）\");\n      } catch (e) {\n        this.config.debug && console.warn(\"[MiniSentry] ❌ LCP观察器初始化失败:\", e);\n      }\n    } else\n      this.config.debug && console.warn(\"[MiniSentry] ⚠️ PerformanceObserver不支持\");\n    this.setupLcpFinalization();\n  }\n  // 修复：设置LCP最终确定机制\n  setupLcpFinalization() {\n    const e = () => {\n      this.latestLcpValue !== void 0 && this.lcpFinalValue === void 0 ? (this.lcpFinalValue = this.latestLcpValue, this.lcpObserver && (this.lcpObserver.disconnect(), this.lcpObserver = void 0), this.config.debug && console.log(`[MiniSentry] 🏁 LCP最终确定: ${Math.round(this.lcpFinalValue)}ms`)) : this.config.debug && this.latestLcpValue === void 0 && console.log(\"[MiniSentry] 🤷 LCP最终确定时无数据，页面可能没有明显的最大内容元素\");\n    };\n    window.addEventListener(\"beforeunload\", e), document.addEventListener(\"visibilitychange\", () => {\n      document.hidden && e();\n    }), setTimeout(() => {\n      e();\n    }, 1e4);\n  }\n  getNavigationTiming() {\n    try {\n      const e = performance.getEntriesByType(\"navigation\")[0];\n      if (e)\n        return {\n          domReady: Math.max(0, e.domContentLoadedEventEnd - e.fetchStart),\n          loadComplete: Math.max(0, e.loadEventEnd - e.fetchStart)\n        };\n    } catch {\n    }\n    try {\n      const e = performance.timing;\n      if (e)\n        return {\n          domReady: Math.max(0, e.domContentLoadedEventEnd - e.navigationStart),\n          loadComplete: Math.max(0, e.loadEventEnd - e.navigationStart)\n        };\n    } catch {\n    }\n    return {\n      domReady: 0,\n      loadComplete: 0\n    };\n  }\n  // 修复：准确获取Web Vitals数据 - 确保FCP和LCP完全独立\n  // 4. 修复getWebVitals方法 - 增加严格的独立性验证\n  getWebVitals() {\n    const e = {}, t = this.getFcpValue();\n    t !== void 0 && (e.fcp = t);\n    const r = this.getLcpValue();\n    return r !== void 0 && (performance.getEntriesByType(\"largest-contentful-paint\").length > 0 ? (e.lcp = r, this.config.debug && console.log(`[MiniSentry] ✅ LCP验证通过: ${Math.round(r)}ms`)) : this.config.debug && console.warn(\"[MiniSentry] 🚨 LCP验证失败：SDK有值但API无数据，丢弃LCP值\")), this.config.debug && console.log(\"[MiniSentry] 📈 最终Web Vitals:\", {\n      fcp: e.fcp ? `${Math.round(e.fcp)}ms` : \"undefined\",\n      lcp: e.lcp ? `${Math.round(e.lcp)}ms` : \"undefined\",\n      验证: `API中LCP条目数: ${performance.getEntriesByType(\"largest-contentful-paint\").length}`\n    }), e;\n  }\n  // 修复：独立的FCP获取方法 - 绝不使用LCP数据\n  // 2. 完全重写getFcpValue方法 - 绝对独立，永不访问LCP数据\n  getFcpValue() {\n    if (this.latestFcpValue !== void 0)\n      return this.config.debug && console.log(`[MiniSentry] 📊 FCP使用观察器值: ${Math.round(this.latestFcpValue)}ms`), this.latestFcpValue;\n    try {\n      const t = performance.getEntriesByType(\"paint\").find((r) => r.name === \"first-contentful-paint\");\n      if (t && t.startTime > 0)\n        return this.latestFcpValue === void 0 && (this.latestFcpValue = t.startTime, this.config.debug && console.log(`[MiniSentry] 📊 FCP使用Paint API值: ${Math.round(t.startTime)}ms (LCP不受影响)`)), t.startTime;\n    } catch (e) {\n      this.config.debug && console.warn(\"[MiniSentry] ⚠️ 获取FCP失败:\", e);\n    }\n    this.config.debug && console.log(\"[MiniSentry] ❌ FCP无数据 - 页面可能还没有内容绘制\");\n  }\n  // 修复：独立的LCP获取方法 - 绝不使用FCP数据\n  // 3. 完全重写getLcpValue方法 - 绝对独立，永不访问FCP数据\n  getLcpValue() {\n    try {\n      const e = performance.getEntriesByType(\"largest-contentful-paint\");\n      if (e.length === 0) {\n        this.config.debug && console.log(\"[MiniSentry] ❌ 浏览器API中没有LCP数据，返回undefined（不使用FCP值）\");\n        return;\n      }\n      const t = e[e.length - 1];\n      if (t && t.startTime > 0)\n        return this.latestFcpValue && Math.abs(t.startTime - this.latestFcpValue) < 1 && this.config.debug && console.warn(\"[MiniSentry] ⚠️ LCP值与FCP相同，但API确实有LCP数据，属于正常情况\"), this.latestLcpValue = t.startTime, this.config.debug && console.log(`[MiniSentry] ✅ LCP从API获取: ${Math.round(t.startTime)}ms`), t.startTime;\n    } catch (e) {\n      this.config.debug && console.warn(\"[MiniSentry] ⚠️ 获取LCP失败:\", e);\n    }\n    this.config.debug && console.log(\"[MiniSentry] ❌ LCP数据不可用，返回undefined（绝不使用FCP）\");\n  }\n  initBehaviorMonitoring() {\n    this.addBreadcrumb(\"navigation\", `Page loaded: ${window.location.href}`, \"info\", {\n      title: document.title,\n      referrer: document.referrer,\n      timestamp: Date.now()\n    }, \"auto\"), document.addEventListener(\"click\", (r) => {\n      const i = r.target, o = {\n        tagName: i.tagName\n      };\n      i.id && (o.id = i.id), this.addBreadcrumb(\n        \"user\",\n        `Clicked on ${i.tagName}${i.id ? `#${i.id}` : \"\"}`,\n        \"info\",\n        o,\n        \"auto\"\n      );\n    }, !0), document.addEventListener(\"submit\", (r) => {\n      const i = r.target;\n      this.addBreadcrumb(\n        \"user\",\n        \"Form submitted\",\n        \"info\",\n        {\n          action: i.action || \"current_page\",\n          method: i.method || \"GET\"\n        },\n        \"auto\"\n      );\n    }, !0);\n    let e;\n    document.addEventListener(\"input\", (r) => {\n      const i = r.target;\n      clearTimeout(e), e = window.setTimeout(() => {\n        this.addBreadcrumb(\n          \"user\",\n          `Input changed: ${i.tagName}(${i.type})`,\n          \"info\",\n          void 0,\n          \"auto\"\n        );\n      }, 1e3);\n    }, !0), document.addEventListener(\"keydown\", (r) => {\n      (r.key === \"Enter\" || r.key === \"Escape\") && this.addBreadcrumb(\n        \"user\",\n        `Key pressed: ${r.key}`,\n        \"info\",\n        void 0,\n        \"auto\"\n      ), r.ctrlKey && [\"s\", \"z\"].includes(r.key) && this.addBreadcrumb(\n        \"user\",\n        `Shortcut: Ctrl+${r.key.toUpperCase()}`,\n        \"info\",\n        void 0,\n        \"auto\"\n      );\n    });\n    let t;\n    window.addEventListener(\"scroll\", () => {\n      clearTimeout(t), t = window.setTimeout(() => {\n        const r = window.pageYOffset || document.documentElement.scrollTop, i = document.documentElement.scrollHeight, o = window.innerHeight, s = Math.round(r / (i - o) * 100);\n        s % 25 === 0 && this.addBreadcrumb(\n          \"user\",\n          `Scrolled to ${s}%`,\n          \"info\",\n          { scrollPercent: s },\n          \"auto\"\n        );\n      }, 1e3);\n    });\n  }\n  //  新增：获取面包屑状态\n  getBreadcrumbStatus() {\n    return {\n      global: {\n        count: this.globalBreadcrumbs.length,\n        limit: this.BREADCRUMB_LIMITS.global,\n        latest: this.globalBreadcrumbs.slice(-3).map((e) => ({\n          category: e.category,\n          message: e.message,\n          timestamp: e.timestamp\n        }))\n      },\n      error: {\n        count: this.errorBreadcrumbs.length,\n        limit: this.BREADCRUMB_LIMITS.error,\n        latest: this.errorBreadcrumbs.slice(-3).map((e) => ({\n          category: e.category,\n          message: e.message,\n          timestamp: e.timestamp\n        }))\n      },\n      behavior: {\n        count: this.behaviorBreadcrumbs.length,\n        limit: this.BREADCRUMB_LIMITS.behavior,\n        latest: this.behaviorBreadcrumbs.slice(-3).map((e) => ({\n          category: e.category,\n          message: e.message,\n          timestamp: e.timestamp\n        }))\n      }\n    };\n  }\n  clearBreadcrumbs(e = \"all\") {\n    switch (e) {\n      case \"global\":\n        this.globalBreadcrumbs = [];\n        break;\n      case \"error\":\n        this.errorBreadcrumbs = [];\n        break;\n      case \"behavior\":\n        this.behaviorBreadcrumbs = [];\n        break;\n      case \"all\":\n        this.globalBreadcrumbs = [], this.errorBreadcrumbs = [], this.behaviorBreadcrumbs = [];\n        break;\n    }\n    this.config.debug && console.log(`[MiniSentry]  ${e} 面包屑已清空`);\n  }\n  getSendStatus() {\n    return {\n      failureCount: Object.fromEntries(this.failureCount),\n      disabledDataTypes: Array.from(this.disabledDataTypes),\n      lastSuccessTime: Object.fromEntries(this.lastSuccessTime),\n      maxFailures: this.MAX_FAILURES\n    };\n  }\n  getStatus() {\n    return {\n      initialized: this.initialized,\n      sessionId: this.sessionId,\n      currentRoute: this.currentRoute,\n      breadcrumbStatus: this.getBreadcrumbStatus(),\n      pageStayTime: {\n        total: Date.now() - this.pageStartTime,\n        visible: this.totalVisibleTime + (this.isPageVisible ? Date.now() - this.visibleStartTime : 0)\n      },\n      sendStatus: this.getSendStatus()\n    };\n  }\n  resetSendStatus() {\n    this.failureCount.clear(), this.disabledDataTypes.clear(), this.lastSuccessTime.clear(), this.failureCount.set(\"error\", 0), this.failureCount.set(\"performance\", 0), this.failureCount.set(\"behavior\", 0), this.reportTimer && clearInterval(this.reportTimer), this.startBatchReporting(), this.config.debug && console.log(\"[MiniSentry] 发送状态已重置，定时器已重启\");\n  }\n  // 增强版调试方法\n  getVitalsStatus() {\n    return {\n      fcp: {\n        observed: this.latestFcpValue,\n        final: this.latestFcpValue,\n        // FCP通常不需要最终确定\n        available: this.latestFcpValue !== void 0,\n        source: this.latestFcpValue !== void 0 ? \"observer/api\" : \"none\"\n      },\n      lcp: {\n        observed: this.latestLcpValue,\n        final: this.lcpFinalValue,\n        available: this.latestLcpValue !== void 0 || this.lcpFinalValue !== void 0,\n        observerActive: this.lcpObserver !== void 0,\n        source: this.lcpFinalValue !== void 0 ? \"final\" : this.latestLcpValue !== void 0 ? \"observer\" : \"none\"\n      },\n      debug: {\n        // 验证是否存在错误赋值\n        possibleIncorrectAssignment: this.latestFcpValue !== void 0 && this.latestLcpValue !== void 0 && this.latestFcpValue === this.latestLcpValue,\n        // 检查Performance API原始数据\n        performanceAPI: {\n          paintEntries: typeof performance < \"u\" ? performance.getEntriesByType(\"paint\").length : 0,\n          lcpEntries: typeof performance < \"u\" ? performance.getEntriesByType(\"largest-contentful-paint\").length : 0\n        }\n      }\n    };\n  }\n  // 修复：销毁时清理观察器\n  destroy() {\n    this.initialized = !1, this.reportTimer && clearInterval(this.reportTimer), this.lcpObserver && (this.lcpObserver.disconnect(), this.lcpObserver = void 0), this.latestLcpValue !== void 0 && this.lcpFinalValue === void 0 && (this.lcpFinalValue = this.latestLcpValue), this.collectAndSendBehaviorData(), this.globalBreadcrumbs = [], this.errorBreadcrumbs = [], this.behaviorBreadcrumbs = [], this.failureCount.clear(), this.disabledDataTypes.clear(), this.lastSuccessTime.clear(), this.config.debug && console.log(\"[MiniSentry] 🔚 Monitor已销毁，最终状态:\", {\n      fcp: this.latestFcpValue ? Math.round(this.latestFcpValue) : void 0,\n      lcp: this.lcpFinalValue ? Math.round(this.lcpFinalValue) : void 0\n    });\n  }\n}\nclass _ {\n  constructor(e) {\n    this.config = {\n      timeout: 3e4,\n      retries: 3,\n      debug: !1,\n      ...e\n    };\n  }\n  /**\n   * 上传sourcemap文件到后端\n   */\n  async upload(e) {\n    const { retries: t = 3 } = this.config;\n    let r = null;\n    for (let i = 1; i <= t; i++)\n      try {\n        this.log(`开始上传sourcemap文件，尝试第 ${i} 次...`);\n        const o = await this.makeRequest(e);\n        return this.log(`上传成功！上传了 ${e.files.length} 个文件`), o;\n      } catch (o) {\n        if (r = o, this.log(`上传失败 (${i}/${t}): ${r.message}`), i < t) {\n          const s = Math.pow(2, i - 1) * 1e3;\n          this.log(`等待 ${s}ms 后重试...`), await this.sleep(s);\n        }\n      }\n    throw new Error(`上传sourcemap失败，已重试 ${t} 次。最后错误: ${r?.message}`);\n  }\n  /**\n   * 发送HTTP请求（浏览器环境实现）\n   */\n  async makeRequest(e) {\n    const { apiUrl: t, apiKey: r, timeout: i = 3e4 } = this.config, o = {};\n    for (const u of e.files)\n      try {\n        const b = await this.calculateFileHash(u.content);\n        o[u.jsFilename] = b;\n      } catch (b) {\n        this.log(`计算文件哈希失败: ${u.jsFilename}, ${b}`), o[u.jsFilename] = \"hash_failed\";\n      }\n    const s = new FormData();\n    s.append(\"projectId\", e.projectId), s.append(\"timestamp\", e.timestamp.toString()), e.version && s.append(\"version\", e.version);\n    const l = this.generateBuildVersion();\n    s.append(\"buildVersion\", l), s.append(\"fileHashes\", JSON.stringify(o)), e.files.forEach((u) => {\n      console.log(\"处理文件:\", u);\n      const b = new Blob([u.content], { type: \"application/json\" });\n      s.append(\"files\", b, u.filename), s.append(\"jsFilenames\", u.jsFilename);\n    });\n    const T = new AbortController(), p = setTimeout(() => T.abort(), i);\n    try {\n      const u = await fetch(t, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${r}`\n          // 不要设置Content-Type，让浏览器自动设置包含boundary的multipart/form-data\n        },\n        body: s,\n        signal: T.signal\n      });\n      if (clearTimeout(p), !u.ok) {\n        const S = await u.text();\n        throw new Error(`HTTP ${u.status}: ${S}`);\n      }\n      return await u.json();\n    } catch (u) {\n      throw clearTimeout(p), u instanceof Error ? u.name === \"AbortError\" ? new Error(`请求超时 (${i}ms)`) : u : new Error(\"未知错误\");\n    }\n  }\n  /**\n   * 验证sourcemap文件格式\n   */\n  validateSourceMap(e) {\n    try {\n      const t = JSON.parse(e);\n      return t.version === 3 && Array.isArray(t.sources) && typeof t.mappings == \"string\";\n    } catch {\n      return !1;\n    }\n  }\n  /**\n   * 压缩sourcemap内容（移除不必要的字段）\n   */\n  compressSourceMap(e) {\n    try {\n      const t = JSON.parse(e), r = {\n        version: t.version,\n        sources: t.sources,\n        names: t.names,\n        mappings: t.mappings,\n        sourcesContent: t.sourcesContent\n      };\n      return JSON.stringify(r);\n    } catch {\n      return e;\n    }\n  }\n  /**\n   * 从文件名提取对应的JS文件名\n   */\n  getJsFilename(e) {\n    return e.replace(/\\.map$/, \"\");\n  }\n  /**\n   * 计算文件内容的SHA-256哈希\n   */\n  async calculateFileHash(e) {\n    const r = new TextEncoder().encode(e), i = await crypto.subtle.digest(\"SHA-256\", r);\n    return Array.from(new Uint8Array(i)).map((s) => s.toString(16).padStart(2, \"0\")).join(\"\");\n  }\n  /**\n   * 生成构建版本号\n   */\n  generateBuildVersion() {\n    const e = /* @__PURE__ */ new Date(), t = e.getFullYear(), r = String(e.getMonth() + 1).padStart(2, \"0\"), i = String(e.getDate()).padStart(2, \"0\"), o = String(e.getHours()).padStart(2, \"0\"), s = String(e.getMinutes()).padStart(2, \"0\"), l = String(e.getSeconds()).padStart(2, \"0\");\n    return `${t}${r}${i}${o}${s}${l}`;\n  }\n  /**\n   * 睡眠指定毫秒数\n   */\n  sleep(e) {\n    return new Promise((t) => setTimeout(t, e));\n  }\n  /**\n   * 调试日志\n   */\n  log(e) {\n    this.config.debug && console.log(`[SourceMapUploader] ${e}`);\n  }\n}\nclass x extends _ {\n  /**\n   * Node.js环境下的HTTP请求实现\n   * 注意：此类仅在Node.js环境（webpack插件）中使用\n   * 浏览器环境的webpack打包会排除此类\n   */\n  async makeRequest(e) {\n    if (typeof window < \"u\")\n      throw new Error(\"NodeSourceMapUploader只能在Node.js环境中使用\");\n    return this.makeNodeRequest(e);\n  }\n  /**\n   * 私有方法：Node.js请求实现\n   * 这个方法只会在Node.js环境中被调用\n   */\n  async makeNodeRequest(e) {\n    const t = require(\"https\"), r = require(\"http\"), { URL: i } = require(\"url\"), o = require(\"form-data\"), { apiUrl: s, apiKey: l, timeout: T = 3e4 } = this.config, p = new i(s), u = p.protocol === \"https:\", b = {};\n    for (const S of e.files) {\n      const g = require(\"crypto\").createHash(\"sha256\").update(S.content).digest(\"hex\");\n      b[S.jsFilename] = g;\n    }\n    return new Promise((S, w) => {\n      const g = new o();\n      g.append(\"projectId\", e.projectId), g.append(\"timestamp\", e.timestamp.toString()), e.version && g.append(\"version\", e.version);\n      const P = this.generateBuildVersion();\n      g.append(\"buildVersion\", P), g.append(\"fileHashes\", JSON.stringify(b)), e.files.forEach((f) => {\n        g.append(\"files\", Buffer.from(f.content), {\n          filename: f.filename,\n          contentType: \"application/json\"\n        }), g.append(\"jsFilenames\", f.jsFilename);\n      });\n      const D = {\n        hostname: p.hostname,\n        port: p.port || (u ? 443 : 80),\n        path: p.pathname + p.search,\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${l}`,\n          ...g.getHeaders()\n        },\n        timeout: T\n      }, R = (u ? t : r).request(D, (f) => {\n        let C = \"\";\n        f.on(\"data\", (M) => {\n          C += M;\n        }), f.on(\"end\", () => {\n          if (f.statusCode && f.statusCode >= 200 && f.statusCode < 300)\n            try {\n              const M = JSON.parse(C);\n              S(M);\n            } catch {\n              w(new Error(\"响应解析失败\"));\n            }\n          else\n            w(new Error(`HTTP ${f.statusCode}: ${C}`));\n        });\n      });\n      R.on(\"error\", (f) => {\n        w(f);\n      }), R.on(\"timeout\", () => {\n        R.destroy(), w(new Error(`请求超时 (${T}ms)`));\n      }), g.pipe(R);\n    });\n  }\n}\nvar k = { exports: {} }, A = {};\n/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar G;\nfunction le() {\n  if (G) return A;\n  G = 1;\n  var c = Symbol.for(\"react.transitional.element\"), e = Symbol.for(\"react.fragment\");\n  function t(r, i, o) {\n    var s = null;\n    if (o !== void 0 && (s = \"\" + o), i.key !== void 0 && (s = \"\" + i.key), \"key\" in i) {\n      o = {};\n      for (var l in i)\n        l !== \"key\" && (o[l] = i[l]);\n    } else o = i;\n    return i = o.ref, {\n      $$typeof: c,\n      type: r,\n      key: s,\n      ref: i !== void 0 ? i : null,\n      props: o\n    };\n  }\n  return A.Fragment = e, A.jsx = t, A.jsxs = t, A;\n}\nvar I = {};\n/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar K;\nfunction ue() {\n  return K || (K = 1, process.env.NODE_ENV !== \"production\" && function() {\n    function c(n) {\n      if (n == null) return null;\n      if (typeof n == \"function\")\n        return n.$$typeof === ie ? null : n.displayName || n.name || null;\n      if (typeof n == \"string\") return n;\n      switch (n) {\n        case P:\n          return \"Fragment\";\n        case U:\n          return \"Profiler\";\n        case D:\n          return \"StrictMode\";\n        case M:\n          return \"Suspense\";\n        case ee:\n          return \"SuspenseList\";\n        case re:\n          return \"Activity\";\n      }\n      if (typeof n == \"object\")\n        switch (typeof n.tag == \"number\" && console.error(\n          \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n        ), n.$$typeof) {\n          case g:\n            return \"Portal\";\n          case f:\n            return (n.displayName || \"Context\") + \".Provider\";\n          case R:\n            return (n._context.displayName || \"Context\") + \".Consumer\";\n          case C:\n            var a = n.render;\n            return n = n.displayName, n || (n = a.displayName || a.name || \"\", n = n !== \"\" ? \"ForwardRef(\" + n + \")\" : \"ForwardRef\"), n;\n          case te:\n            return a = n.displayName || null, a !== null ? a : c(n.type) || \"Memo\";\n          case z:\n            a = n._payload, n = n._init;\n            try {\n              return c(n(a));\n            } catch {\n            }\n        }\n      return null;\n    }\n    function e(n) {\n      return \"\" + n;\n    }\n    function t(n) {\n      try {\n        e(n);\n        var a = !1;\n      } catch {\n        a = !0;\n      }\n      if (a) {\n        a = console;\n        var d = a.error, h = typeof Symbol == \"function\" && Symbol.toStringTag && n[Symbol.toStringTag] || n.constructor.name || \"Object\";\n        return d.call(\n          a,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          h\n        ), e(n);\n      }\n    }\n    function r(n) {\n      if (n === P) return \"<>\";\n      if (typeof n == \"object\" && n !== null && n.$$typeof === z)\n        return \"<...>\";\n      try {\n        var a = c(n);\n        return a ? \"<\" + a + \">\" : \"<...>\";\n      } catch {\n        return \"<...>\";\n      }\n    }\n    function i() {\n      var n = $.A;\n      return n === null ? null : n.getOwner();\n    }\n    function o() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function s(n) {\n      if (H.call(n, \"key\")) {\n        var a = Object.getOwnPropertyDescriptor(n, \"key\").get;\n        if (a && a.isReactWarning) return !1;\n      }\n      return n.key !== void 0;\n    }\n    function l(n, a) {\n      function d() {\n        W || (W = !0, console.error(\n          \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n          a\n        ));\n      }\n      d.isReactWarning = !0, Object.defineProperty(n, \"key\", {\n        get: d,\n        configurable: !0\n      });\n    }\n    function T() {\n      var n = c(this.type);\n      return q[n] || (q[n] = !0, console.error(\n        \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n      )), n = this.props.ref, n !== void 0 ? n : null;\n    }\n    function p(n, a, d, h, E, y, O, V) {\n      return d = y.ref, n = {\n        $$typeof: w,\n        type: n,\n        key: a,\n        props: y,\n        _owner: E\n      }, (d !== void 0 ? d : null) !== null ? Object.defineProperty(n, \"ref\", {\n        enumerable: !1,\n        get: T\n      }) : Object.defineProperty(n, \"ref\", { enumerable: !1, value: null }), n._store = {}, Object.defineProperty(n._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      }), Object.defineProperty(n, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      }), Object.defineProperty(n, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: O\n      }), Object.defineProperty(n, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: V\n      }), Object.freeze && (Object.freeze(n.props), Object.freeze(n)), n;\n    }\n    function u(n, a, d, h, E, y, O, V) {\n      var m = a.children;\n      if (m !== void 0)\n        if (h)\n          if (oe(m)) {\n            for (h = 0; h < m.length; h++)\n              b(m[h]);\n            Object.freeze && Object.freeze(m);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else b(m);\n      if (H.call(a, \"key\")) {\n        m = c(n);\n        var B = Object.keys(a).filter(function(ne) {\n          return ne !== \"key\";\n        });\n        h = 0 < B.length ? \"{key: someKey, \" + B.join(\": ..., \") + \": ...}\" : \"{key: someKey}\", X[m + h] || (B = 0 < B.length ? \"{\" + B.join(\": ..., \") + \": ...}\" : \"{}\", console.error(\n          `A props object containing a \"key\" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />`,\n          h,\n          m,\n          B,\n          m\n        ), X[m + h] = !0);\n      }\n      if (m = null, d !== void 0 && (t(d), m = \"\" + d), s(a) && (t(a.key), m = \"\" + a.key), \"key\" in a) {\n        d = {};\n        for (var j in a)\n          j !== \"key\" && (d[j] = a[j]);\n      } else d = a;\n      return m && l(\n        d,\n        typeof n == \"function\" ? n.displayName || n.name || \"Unknown\" : n\n      ), p(\n        n,\n        m,\n        y,\n        E,\n        i(),\n        d,\n        O,\n        V\n      );\n    }\n    function b(n) {\n      typeof n == \"object\" && n !== null && n.$$typeof === w && n._store && (n._store.validated = 1);\n    }\n    var S = se, w = Symbol.for(\"react.transitional.element\"), g = Symbol.for(\"react.portal\"), P = Symbol.for(\"react.fragment\"), D = Symbol.for(\"react.strict_mode\"), U = Symbol.for(\"react.profiler\"), R = Symbol.for(\"react.consumer\"), f = Symbol.for(\"react.context\"), C = Symbol.for(\"react.forward_ref\"), M = Symbol.for(\"react.suspense\"), ee = Symbol.for(\"react.suspense_list\"), te = Symbol.for(\"react.memo\"), z = Symbol.for(\"react.lazy\"), re = Symbol.for(\"react.activity\"), ie = Symbol.for(\"react.client.reference\"), $ = S.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, H = Object.prototype.hasOwnProperty, oe = Array.isArray, L = console.createTask ? console.createTask : function() {\n      return null;\n    };\n    S = {\n      react_stack_bottom_frame: function(n) {\n        return n();\n      }\n    };\n    var W, q = {}, J = S.react_stack_bottom_frame.bind(\n      S,\n      o\n    )(), Y = L(r(o)), X = {};\n    I.Fragment = P, I.jsx = function(n, a, d, h, E) {\n      var y = 1e4 > $.recentlyCreatedOwnerStacks++;\n      return u(\n        n,\n        a,\n        d,\n        !1,\n        h,\n        E,\n        y ? Error(\"react-stack-top-frame\") : J,\n        y ? L(r(n)) : Y\n      );\n    }, I.jsxs = function(n, a, d, h, E) {\n      var y = 1e4 > $.recentlyCreatedOwnerStacks++;\n      return u(\n        n,\n        a,\n        d,\n        !0,\n        h,\n        E,\n        y ? Error(\"react-stack-top-frame\") : J,\n        y ? L(r(n)) : Y\n      );\n    };\n  }()), I;\n}\nvar Q;\nfunction de() {\n  return Q || (Q = 1, process.env.NODE_ENV === \"production\" ? k.exports = le() : k.exports = ue()), k.exports;\n}\nvar F = de();\nclass he extends ae {\n  constructor(e) {\n    super(e), this.state = { hasError: !1 };\n  }\n  static getDerivedStateFromError(e) {\n    return { hasError: !0, error: e };\n  }\n  componentDidCatch(e, t) {\n    const { onError: r, projectId: i, tags: o } = this.props;\n    if (r) {\n      const s = {\n        type: v.REACT_ERROR,\n        message: e.message,\n        stack: e.stack,\n        timestamp: Date.now(),\n        url: window.location.href,\n        projectId: i,\n        userAgent: navigator.userAgent,\n        breadcrumbs: [],\n        // React错误边界中没有面包屑上下文\n        captureType: \"auto\",\n        tags: this.cleanTags(o),\n        //  React错误边界中通常无法获取精确的文件位置信息\n        // 这些字段保持undefined，让Monitor的parseErrorStack来处理\n        filename: void 0,\n        jsFilename: void 0,\n        lineno: void 0,\n        colno: void 0\n      };\n      r(s);\n    }\n    console.error(\"ErrorBoundary caught an error:\", e, t);\n  }\n  // 简化的标签清理方法（与Monitor.ts保持一致）\n  cleanTags(e) {\n    if (!e) return;\n    const t = {};\n    let r = 0;\n    for (const [i, o] of Object.entries(e))\n      if (!(r >= 20 || i.length > 50) && o != null) {\n        const s = typeof o == \"object\" ? JSON.stringify(o) : String(o);\n        t[i] = s.length > 500 ? s.slice(0, 500) + \"...\" : o, r++;\n      }\n    return r > 0 ? t : void 0;\n  }\n  render() {\n    return this.state.hasError ? this.props.fallback || /* @__PURE__ */ F.jsxs(\"div\", { style: {\n      padding: \"20px\",\n      textAlign: \"center\",\n      color: \"#666\"\n    }, children: [\n      /* @__PURE__ */ F.jsx(\"h2\", { children: \"抱歉，页面出现了错误\" }),\n      /* @__PURE__ */ F.jsx(\"p\", { children: \"我们已经记录了这个问题，请稍后重试。\" }),\n      /* @__PURE__ */ F.jsx(\n        \"button\",\n        {\n          onClick: () => window.location.reload(),\n          style: {\n            padding: \"8px 16px\",\n            backgroundColor: \"#1890ff\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: \"4px\",\n            cursor: \"pointer\"\n          },\n          children: \"刷新页面\"\n        }\n      )\n    ] }) : this.props.children;\n  }\n}\nconst Z = {\n  Monitor: N,\n  ErrorBoundary: he,\n  SourceMapUploader: _,\n  NodeSourceMapUploader: x,\n  createMonitor: (c) => new N(c),\n  createUploader: (c) => {\n    const e = typeof window < \"u\" ? _ : x;\n    return new e(c);\n  },\n  VERSION: \"1.1.32\"\n}, fe = Z, ge = \"1.1.32\";\nfunction pe(c) {\n  return new N(c);\n}\nfunction be(c) {\n  const e = typeof window < \"u\" ? _ : x;\n  return new e(c);\n}\ntypeof window < \"u\" && (window.MiniSentrySDK = Z);\nexport {\n  ce as DataType,\n  he as ErrorBoundary,\n  v as ErrorType,\n  N as Monitor,\n  x as NodeSourceMapUploader,\n  fe as SDK,\n  _ as SourceMapUploader,\n  ge as VERSION,\n  pe as createMonitor,\n  be as createUploader,\n  N as default\n};\n//# sourceMappingURL=index.esm.js.map\n"]}